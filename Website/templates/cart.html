<DOCTYPE html>
  <html lang="en">
  <head>

    <script src="/static/scripts.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
    <link href='https://fonts.googleapis.com/css?family=Palanquin Dark' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Palanquin' rel='stylesheet'>

  </head>

  
  <body>
    <div class="wrapper">
     <header style="height: 25vh">
      <nav>
       <div class="menu-icon">
        <i class="fa fa-bars fa-2x"></i>
      </div>
      <div class="logo">
        <a class="navbar-brand" href="/home">
          <img src="/static/logo2.gif" alt="" style="width:50px; height:40px;">
        </a>
      </div>
      <div class="menu">
        <ul>
          <li><a href="/home">Clothes</a></li>
          <li><a href="/gallery">Gallery</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/cart">Basket</a></li>
        </ul>
      </div>
    </nav>

  </header>
</div>



<div class="content">
<!-- 
   <div id="outerOuter" class="outerOuter"> -->
    <div id="outer" class="outer">

      <div class="row">
 
        <div class="columnCartEdge">
        </div>


        <div class="cartColumn" id="cartColumn" style="margin-top: -50px;">

          <table style="width: 100%;" border="0">
            <tbody>
              <tr>
                <td style="width:20%; vertical-align:bottom; text-align:center;"><b style="font-size:60px; color: gray;">Cart</b></td>
                <td style="width:20%"></td>
                <td style="width:20%; vertical-align:bottom; text-align:center;"><b style="font-size:22px; color: gray;">Price</b></td>
                <td style="width:20%; vertical-align:bottom; text-align:center;"><b style="font-size:22px; color: gray;">Quantity</b></td>
                <td style="width:20%; vertical-align:bottom; text-align:center;"><b style="font-size:22px; color: gray;">Total</b></td>
              </tr>
<!--                         <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                          </tr> -->
                        </tbody>
                      </table>


                      <input type="hidden" id="myHiddenVar" name="variable" value="{{items}}">

                      <div id="myDynamicTable">


                      <div id="noItems" style="width: 100%;"> </div>

                      </div>

                      <table style="width: 100%;" border="0">
                        <tbody>
<!--                         <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                          </tr> -->
                          <tr>
                            <td style="width:20%; vertical-align:bottom;"><b style="font-size:60px"></b></td>
                            <td style="width:20%"></td>
                            <td style="width:20%; vertical-align:bottom;"><b style="font-size:22px;"></b></td>
                            <td style="width:20%; vertical-align:bottom; text-align: center;"><b style="font-size:22px; color: gray;">Cart Total</b></td>
                            <td id="cTotal" style="width:20%; vertical-align:bottom; border-top: 5px solid gray; text-align:center; font-size:22px; color: gray;"></td>
                          </tr>
                          <tr>
                            <td style="width:20%"></td>
                            <td style="width:20%"></td>
                            <td style="width:20%; vertical-align:bottom; height: 100px;">


                                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypalForm">
                                  <!-- Identify your business so that you can collect the payments. -->
                                  <input type="hidden" name="business" value="olivia.mc.98@hotmail.co.uk"> <!-- Add your PayPal Seller/Business email address Required-->
                                  <!-- Specify a Buy Now button. -->
                                  <input type="hidden" name="cmd" value="_xclick">
                                  <!-- Specify details about the item that buyers will purchase. -->
                                  <input type="hidden" name="item_name" value="Entire Cart"> <!-- Add Description e.g your room type Required-->
                                  <input type="hidden" id="hiddenAmount" name="amount" value="0.01"> <!-- Dynamically add Total Amount Required-->
                                  <input type="hidden" name="currency_code" value="GBP"> <!-- Update to your currency -->
                                  <input id="invoice" type="hidden" value="" name="invoice1"> <!-- Add Unique invoice for each transaction -->
                                  <!-- <input type="hidden" name="notify_url" value="www.yourwebsite.com/ipn.php"> Please add IPN URL You can use this service to automate back-office and administrative functions, including fulfilling orders, tracking customers, and providing status and other information related to transactions. -->
                                  <input type='hidden' name='cancel_return' value='www.google.com' /> <!-- Take customers to this URL when they cancel their checkout -->
                                  <input type='hidden' name='return' value='www.google.com' /> <!-- Take customers to this URL when they finish their checkout  -->
                                  <!-- Display the payment button. -->
                                  <input type="image" name="submit" border="0" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif" alt="PayPal - The safer, easier way to pay online">
                                </form>

                              </td>
                              <td style="width:20%"></td>
                              <td style="width:20%"></td>
                            </tr>
                          </tbody>
                        </table>

                        <script>

                          var list = document.getElementById("myHiddenVar").value;

                          list = list.replace(/\[/g, "");
                          list = list.replace(/\]/g, "");
                          list = list.replace(/\'/g, "");

                          var nList = list.split(',');

                          var numberItems = nList.length/6;

                          var clientWidth = document.getElementById("cartColumn").offsetWidth;

                          var tableWidth = document.getElementById("myDynamicTable").offsetWidth;

                          var theTotalPrice = 0;

                          var myTableDiv = document.getElementById("myDynamicTable");

                          var table = document.createElement('TABLE');
                          table.border = '0';

                          var tableBody = document.createElement('TBODY');
                          table.appendChild(tableBody);

                          if(numberItems >= 1) {

                    // FOR EACH OBJECT CREATE A LINE TO SPLIT

                    for (var i = 0; i < numberItems; i++) {

                      var tr = document.createElement('TR');
                      tr.innerHTML = "<div class='line' style='width:" + clientWidth*0.85 + "'></div>";
                      tableBody.appendChild(tr);


                      for (var j = 0; j < 7; j++) {

                        if(j == 0){
                       // var imgNo = (i*6)+4;

                       var td = document.createElement('TD');
                       td.width = clientWidth/20;
                       var link = "/removefromcart/"+i
                       td.innerHTML = "<a href=" + link + "> <img style='float:center; width: 18px;' src='/static/whitex.png'/> </a>"
                       tr.appendChild(td);

                     }

                     if(j == 1){
                      var imgNo = (i*6)+4;

                      var td = document.createElement('TD');
                      td.width = clientWidth/10;
                      var timg = document.createElement('IMG');
                      timg.style.cssText = 'display:block; margin:0 auto; margin-top: 10px; margin-bottom: 10px;';
                      timg.width = clientWidth/10;
                      timg.src = nList[imgNo];
                      td.appendChild(timg);
                      td.style = 'display:block; margin:0 auto;';
                      tr.appendChild(td);

                    }
                    if(j == 2){
                       // var imgNo = (i*6)+4;

                       var td = document.createElement('TD');
                       td.width = clientWidth/20;
                       tr.appendChild(td);

                     }
                     if(j == 3){
                      var nameNo = (i*6)+1;
                      var sizeNo = (i*6)+2;

                      var td = document.createElement('TD');
                      td.style.cssText = 'color: gray;';
                      td.width = clientWidth/5;
                      td.appendChild(document.createTextNode(nList[nameNo] + " - " + nList[sizeNo]));
                      tr.appendChild(td);
                    }
                    if(j == 4){
                      var priceNo = (i*6)+5;

                      var td = document.createElement('TD');
                      td.style.cssText = 'text-align:center; color: gray;';
                      td.width = clientWidth/5;
                      td.appendChild(document.createTextNode("£" + nList[priceNo] + ".00"));
                      tr.appendChild(td);
                    }
                    if(j == 5){
                      var quantityNo = (i*6)+3;

                      var td = document.createElement('TD');
                      td.style.cssText = 'text-align:center; color: gray;';
                      td.width = clientWidth/5;
                      td.appendChild(document.createTextNode(nList[quantityNo]));
                      tr.appendChild(td);
                    }
                    if(j == 6){
                      var priceNo = (i*6)+5;
                      var quantityNo = (i*6)+3;

                      var td = document.createElement('TD');
                      td.style.cssText = 'text-align:center; color: gray;';
                      td.width = clientWidth/5;
                      td.appendChild(document.createTextNode("£" + nList[quantityNo] * nList[priceNo] + ".00"));
                      tr.appendChild(td);
                      theTotalPrice = theTotalPrice + (nList[quantityNo] * nList[priceNo]);
                    }
                  }
                }

                var tr = document.createElement('TR');
                tr.innerHTML = "<div class='line' style='width:" + tableWidth*0.85 + "'></div>";
                tableBody.appendChild(tr);
              }

              myTableDiv.appendChild(table);

              document.getElementById("cTotal").innerHTML = "£" + theTotalPrice + ".00";

            </script>

            <script>

              var list = document.getElementById("myHiddenVar").value;

              list = list.replace(/\[/g, "");
              list = list.replace(/\]/g, "");
              list = list.replace(/\'/g, "");

              var nList = list.split(',');

              var numberItems = nList.length/6;

              if(numberItems < 1) {

                document.getElementById("noItems").innerHTML = "<b style='margin-top: 50px; margin-bottom=50px;'> No Items In Basket </b>";
                document.getElementById("noItems").style = "text-align: center; vertical-align: center; font-size: 25px; color: gray;";

                document.getElementById('paypalForm').onclick = function() {
                  window.alert("Basket is Empty");
                  return false;
                }
              }

              document.getElementById("hiddenAmount").value = theTotalPrice;


    // document.getElementById('buyButton').onclick = function() {
    //     if (numberItems < 1) {
    //        window.alert("No items in basket.");
    //    } else {
    //     window.location='/checkout'
    // }
    // return false;
//}

</script>

</div>

<div class="columnCartEdge">
</div>

</div>

  <div class="spacer">

  </div>

</div>


</div>




</div>
<!-- </div>
 -->






  <!-- Create the footer -->

  <div class="footerRow">

    <div class="footerColumn"> <p style="text-align: center; color: gray; font-size: 1.75em;"> Ross Langan - 2020 </p> </div>
    <div class="footerColumn"> <p style="text-align: center; color: gray; font-size: 1.75em;"> Ross Langan - 2020 </p> </div>
    <div class="footerColumn"> <p style="text-align: center; color: gray; font-size: 1.75em;"> Ross Langan - 2020 </p> </div>

  </div>
</div>
</div>
</div>


</body>


<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
<script src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js'></script>
<script  src="function.js"></script>

</html>
